'use strict';function _0x98aa(_0x54e833,_0xe085f6){const _0x4f3e62=_0x4f3e();return _0x98aa=function(_0x98aa35,_0x48891c){_0x98aa35=_0x98aa35-0x17c;let _0x48d6c6=_0x4f3e62[_0x98aa35];return _0x48d6c6;},_0x98aa(_0x54e833,_0xe085f6);}const _0x19287a=_0x98aa;(function(_0x295842,_0x1bd071){const _0x5ce615=_0x98aa,_0x49d338=_0x295842();while(!![]){try{const _0x52a2ca=parseInt(_0x5ce615(0x301))/0x1*(parseInt(_0x5ce615(0x227))/0x2)+parseInt(_0x5ce615(0x1b5))/0x3+parseInt(_0x5ce615(0x27c))/0x4+parseInt(_0x5ce615(0x2ad))/0x5*(parseInt(_0x5ce615(0x2f9))/0x6)+-parseInt(_0x5ce615(0x2a5))/0x7*(parseInt(_0x5ce615(0x267))/0x8)+parseInt(_0x5ce615(0x2a3))/0x9+-parseInt(_0x5ce615(0x261))/0xa;if(_0x52a2ca===_0x1bd071)break;else _0x49d338['push'](_0x49d338['shift']());}catch(_0x4ab836){_0x49d338['push'](_0x49d338['shift']());}}}(_0x4f3e,0xeb788));var __awaiter=this&&this[_0x19287a(0x237)]||function(_0x488348,_0x151605,_0x526a6c,_0x4e2b58){function _0x43de9b(_0x6c96e9){return _0x6c96e9 instanceof _0x526a6c?_0x6c96e9:new _0x526a6c(function(_0x1b3ad8){_0x1b3ad8(_0x6c96e9);});}return new(_0x526a6c||(_0x526a6c=Promise))(function(_0x1c597e,_0x2feed6){const _0x556c64=_0x98aa;function _0x1ff9c3(_0x760444){const _0x449752=_0x98aa;try{_0x429a3c(_0x4e2b58[_0x449752(0x1c3)](_0x760444));}catch(_0x122acf){_0x2feed6(_0x122acf);}}function _0x531e7c(_0x321fcb){try{_0x429a3c(_0x4e2b58['throw'](_0x321fcb));}catch(_0x2b8e49){_0x2feed6(_0x2b8e49);}}function _0x429a3c(_0x234179){const _0x5ef171=_0x98aa;_0x234179[_0x5ef171(0x20b)]?_0x1c597e(_0x234179[_0x5ef171(0x1c2)]):_0x43de9b(_0x234179[_0x5ef171(0x1c2)])[_0x5ef171(0x2b4)](_0x1ff9c3,_0x531e7c);}_0x429a3c((_0x4e2b58=_0x4e2b58[_0x556c64(0x283)](_0x488348,_0x151605||[]))[_0x556c64(0x1c3)]());});},__importDefault=this&&this[_0x19287a(0x297)]||function(_0x42f27d){const _0x34bc20=_0x19287a;return _0x42f27d&&_0x42f27d[_0x34bc20(0x21b)]?_0x42f27d:{'default':_0x42f27d};};Object[_0x19287a(0x2a4)](exports,_0x19287a(0x21b),{'value':!![]}),exports[_0x19287a(0x21a)]=exports[_0x19287a(0x224)]=void 0x0;function _0x4f3e(){const _0x2d3ebe=['\x20totalEnemies\x20','isFarming','delete','web3Ready','MapEntity','4757112qjBhHV','find','Error\x20create\x20material\x0a\x0a','startPVE','getStoryMap','sleepAllHeroes','alertShieldHero','./entity/map','unlinkSync','currentCalcFarm','rarity','energy','bind','value','next','default','sleep','user','\x20y:','create','push','index','forEach','isHeroFarming','length','now','No\x20hero\x20Adventure\x20mode','houses','version','damage','getStatusPlaying','nextLocation','yarn\x20install','setHeroShield','connectServer','parseSyncHousePayload','getCurrentCalcFarm','minHeroEnergyPercentage','buildHouse','rewards','includes','current','last_name','Waiting\x20for\x20the\x20heroes\x20to\x20finish\x20farming','update','all','ENEMY_TAKE_DAMAGE','No\x20keys\x20to\x20play\x20right\x20now.','getHeroesAdventure','Not\x20connected,\x20please\x20wait','./csv/','saveRewardsCsv','maxEnergy','home','toFixed','lastTransactionWeb3','log','setMaterial','Will\x20sleep\x20for\x2010\x20seconds','goWork','updateHeroState','slots','tile','adventureHeroes','history','you\x20have\x20material:\x20','Refreshing\x20map...','join','you\x20need\x20to\x20put\x20an\x20\x22IDENTIFY\x22\x20in\x20the\x20configuration\x20file','modeAmazon','apps','isActivateHero','pm2SaveFile','checkHeroShield','There\x20are\x20no\x20heroes\x20to\x20work\x20now.','hasHeroZeroShield','sendPing','get','Already\x20up\x20to\x20date.\x0a','updating\x20version...','hasMaterial','starting','Save\x20rewards\x20in\x20csv...','Removing\x20hero\x20','START_EXPLODE','empty\x20shield','done','login','date','./api/telegram','getWalletBalance','Network:\x20','./api','logger','split','notification','Key','client','web3CreateRock','add\x20enemies\x20','env','time','__esModule','GO_HOME','Resting\x20heroes\x20(','startStoryExplode','You\x20have\x20','played_bombers','Enter\x20door\x20adventure\x20mode','gen_id','homeSlots','TreasureMapBot','ceil','toString','9382vIptgj','Sending\x20hero\x20','positions','checkShields','Heroes\x20selected\x20for\x20home(','map','Client','locationByHeroWorking','rarityIndex','Rewards','isResettingShield','./model','buildHero','getReward','ping','git\x20pull','__awaiter','Treasure/Amazon:\x0a','message','tete','lastId','numHeroWork','\x20|\x20','startExplodeV2','capacity','\x20will\x20place\x20bomb\x20on\x20(','total','VERSION_CODE','Starting\x20pm2\x20','START_EXPLODE_V2','nextId','startCalcFarm','../src/ecosystem.config','getStoryDetails','placeBombs','max_level','shields','syncHouse','Refreshing\x20heroes','bcoin','</b>','Logging\x20in...','alertMaterial','rede','sleeping','src','active','enterDoor','transactionHash','enemies','getHeroAdventure','state','goSleep','heroBombs','\x20from\x20home','notificationShieldHero','Sync\x20','Repairing\x20shield\x20hero\x20','1269250bbYWOU','catch','telegraf','updateHeroEnergy','\x20keys\x20mode\x20adventure','updateHeroShield','2336sHjrsD','.csv','getTotalHeroes','updateBlock','adventureBlocks','resetShieldAuto','Starting\x20bot...','nameuser','remainTime','sea','Creating\x20material\x20with\x20heroes:\x20','reduce','execSync','min','Will\x20send\x20heroes\x20home\x20(','name','HeroZeroShield','explosionByHero','getIdentify','<b>','explosion-rewards','1558844dtUAPC','adventureEnemies','\x20needs\x20shield\x20repair','Total\x20enemies\x20adventure:\x20','loop','activeHeroes','connect','apply','heroType','shouldRun','pm2RemoveAccount','handleHeroHome','bomb\x20on\x20(','Sleep','\x20to\x20sleep','parseStartExplodePayload','params','adventure','loadHouses','destroy','resetShield','getBlockAdventure','getEnemyAdventure','Remaining\x20chest\x20(Amazon):\x20\x0a','forceExit','\x20with\x20hero\x20','totalLife','__importDefault','Account:\x20','getAverageWeb3Transaction','Amazon','saveConfig','resetState','web3GetRock','isCreatingMaterial','blocks','\x20home','handleExplosion','assign','3751110zzJABf','defineProperty','36694jKKopx','squad','lastAdventure','notWorking','IDENTIFY','getSumShield','type','saveRewards','18880jBKyeR','web3ResetShield','./api/notification','removeBombHero','parseHeroStats','ids','placeBombsAdventure','then','Opening\x20map...','sendMessageChat','setIsFarmTrue','Squad','addBombHero','range','isFloat','timedelta','selection','BSC','./parsers','parseGetActiveBomberPayload','toWork','handleHeroWork','getBlockMap','workingSelection','start','Cheking\x20shields...','refreshHeroAtHome','logIn','mwei','placebombAdventure','\x20slots)','database-','./entity/report','Closing\x20map...','handleSquadLoad','set',']:\x20','slice','\x20of\x20material','registerNewMap','\x20Bcoin','\x20heroes\x20to\x20work','\x20shield\x20has\x20been\x20repaired\x0a\x0aYou\x20have\x20','You\x20need\x20more\x20material','getHeroDamageForMap','Report','goHome','./lib','createMaterial','owner','wallet','git\x20config\x20--global\x20user.email\x20\x22teste@teste.com\x22','./entity/rewards','Database','Home','refreshHeroSelection','):\x20\x0a','sendEventSockect','Will\x20play\x20level\x20','handleMessageError','reset','sort','info','Sent\x20','current\x20gas\x20reset\x20shield:\x20','BCoin','handleHeroSleep','stop','getRewardAccount','CONTRACT_USDT','CONTRACT_MATIC','./api/database','isConnected','START_STORY_EXPLODE','startExplode','placeBombsHero','246zMHvPS','enemyTakeDamage','houseHeroes','pm2Restart','BLOCK_TYPE_MAP','handleMapLoad','first_name','alertShielZerodHero','16JPeenB','Adventure\x20mode\x20iteration','refreshMap','door_y','checkVersion','filter','homeSelection','playing','notificationBlockCage','pm2','alertShield','floor','Working\x20heroes\x20(','wipe','loginParams','ecosystem.config.js','handleEnemyTakeDamage','awaitHeroFarm','existsSync','npx\x20sequelize-cli\x20db:migrate','claimPending','getRandomArbitrary','rockRepairShield','door_x','telegram','handleStartStoryExplode','\x20to\x20work','findOne','git\x20config\x20--global\x20user.name\x20\x22teste\x22','byState',']\x20damage:\x20','Resting\x20heroes\x20at\x20home\x20(','Rewards:\x0a','Sleep\x20all\x20heroes...','sleep\x20for\x2010\x20seconds','username','LastResetShield','placeBomb','getRandomPosition','KGRpc3RhbmNlIC8gaGVyby5zcGVlZCkgKiAxMzUw','shift','web3Balance','network','getTime','Work','getFromCsv','abs','You\x20won\x20a\x20hero','Notification','CONTRACT_BOMB','hasHeroShield','Hero\x20','syncBomberman','identify'];_0x4f3e=function(){return _0x2d3ebe;};return _0x4f3e();}const api_1=require(_0x19287a(0x211)),constants_1=require('./constants'),lib_1=require(_0x19287a(0x2dc)),logger_1=require('./logger'),child_process_1=__importDefault(require('child_process')),pm2_1=__importDefault(require(_0x19287a(0x183))),fs_1=require('fs'),path_1=__importDefault(require('path')),database_1=require(_0x19287a(0x2f4)),notification_1=require(_0x19287a(0x2af)),telegram_1=require(_0x19287a(0x20e)),heroZeroShield_1=require('./entity/heroZeroShield'),lastResetShield_1=require('./entity/lastResetShield'),map_1=require(_0x19287a(0x1bc)),report_1=require(_0x19287a(0x2cd)),rewards_1=require(_0x19287a(0x2e1)),model_1=require(_0x19287a(0x232)),parsers_1=require(_0x19287a(0x2bf)),DEFAULT_TIMEOUT=0x3e8*0x3c*0x2,HISTORY_SIZE=0x5,ADVENTURE_ENABLED=!![];class TreasureMapBot{constructor(_0x2ed1f4,_0x555ce5){const _0x53d693=_0x19287a;this[_0x53d693(0x25c)]={},this[_0x53d693(0x294)]=!![],this['adventureBlocks']=[],this['adventureEnemies']=[],this[_0x53d693(0x2fb)]=[],this[_0x53d693(0x1f4)]=[],this[_0x53d693(0x181)]=null,this[_0x53d693(0x231)]=![],this[_0x53d693(0x1fc)]=![],this[_0x53d693(0x1ec)]='';const {forceExit:forceExit=!![],minHeroEnergyPercentage:minHeroEnergyPercentage=0x5a,tryServers:tryServers=![],modeAmazon:modeAmazon=![],houseHeroes:houseHeroes='',adventureHeroes:adventureHeroes='',modeAdventure:modeAdventure=![],saveRewardsCsv:saveRewardsCsv=![],resetShieldAuto:resetShieldAuto=![],telegramChatIdCheck:telegramChatIdCheck=![],ignoreNumHeroWork:ignoreNumHeroWork=![],ignoreShieldHeroHouse:ignoreShieldHeroHouse=![],reportRewards:reportRewards=0x0,ignoreCommands:ignoreCommands=[],workHeroWithShield:workHeroWithShield=0x0,rede:rede=_0x53d693(0x2be),version:version=constants_1[_0x53d693(0x242)],alertShield:alertShield=0x0,alertMaterial:alertMaterial=0x0,maxGasRepairShield:maxGasRepairShield=0x0,numHeroWork:numHeroWork=0xf,server:server=_0x53d693(0x270),telegramChatId:telegramChatId='',rewardsAllPermission:rewardsAllPermission=[],telegramKey:telegramKey='',identify:identify='',ignoreRewardCurrency:ignoreRewardCurrency=[]}=_0x555ce5;this['params']={'forceExit':forceExit,'minHeroEnergyPercentage':minHeroEnergyPercentage,'modeAmazon':!![],'tryServers':tryServers,'houseHeroes':houseHeroes,'adventureHeroes':adventureHeroes,'modeAdventure':modeAdventure,'saveRewardsCsv':saveRewardsCsv,'rede':rede,'version':version,'alertShield':alertShield,'numHeroWork':numHeroWork,'server':server,'ignoreCommands':ignoreCommands,'workHeroWithShield':workHeroWithShield,'telegramChatId':telegramChatId,'telegramKey':telegramKey,'telegramChatIdCheck':telegramChatIdCheck,'ignoreShieldHeroHouse':ignoreShieldHeroHouse,'resetShieldAuto':resetShieldAuto,'rewardsAllPermission':rewardsAllPermission,'maxGasRepairShield':maxGasRepairShield,'ignoreNumHeroWork':ignoreNumHeroWork,'alertMaterial':alertMaterial,'reportRewards':reportRewards,'identify':identify,'ignoreRewardCurrency':ignoreRewardCurrency},this[_0x53d693(0x188)]=_0x2ed1f4,_0x2ed1f4['rede']=rede,_0x2ed1f4[_0x53d693(0x1d1)]=version;try{this['db']=new database_1[(_0x53d693(0x2e2))](this[_0x53d693(0x279)]());}catch(_0x167829){const _0x27b67d=path_1[_0x53d693(0x1c4)][_0x53d693(0x1f8)](__dirname,'..',_0x53d693(0x2cc)+this['getIdentify']()+'.json');(0x0,fs_1[_0x53d693(0x18c)])(_0x27b67d)&&(0x0,fs_1[_0x53d693(0x1bd)])(_0x27b67d);throw _0x167829;}this[_0x53d693(0x181)]=null,this[_0x53d693(0x216)]=new api_1[(_0x53d693(0x22d))](_0x2ed1f4,DEFAULT_TIMEOUT,modeAmazon,this[_0x53d693(0x28c)],this['db']),this[_0x53d693(0x22c)]=new model_1['TreasureMap']({'blocks':[]}),this[_0x53d693(0x2a6)]=new model_1[(_0x53d693(0x2b8))]({'heroes':[]}),this[_0x53d693(0x1d0)]=[],this[_0x53d693(0x294)]=forceExit||!![],this[_0x53d693(0x2fb)]=houseHeroes?houseHeroes[_0x53d693(0x213)](':'):[],this[_0x53d693(0x1f4)]=adventureHeroes?adventureHeroes[_0x53d693(0x213)](':'):[],this[_0x53d693(0x1da)]=minHeroEnergyPercentage,this[_0x53d693(0x278)]=new Map(),this[_0x53d693(0x25c)]={},this['locationByHeroWorking']=new Map(),this[_0x53d693(0x25e)]=new Map(),this[_0x53d693(0x2bd)]=[],this[_0x53d693(0x1f5)]=[],this[_0x53d693(0x1ca)]=0x0,this[_0x53d693(0x285)]=![],this[_0x53d693(0x29e)]=![],this['isFarming']=![],this[_0x53d693(0x1cc)]=![],this[_0x53d693(0x2a7)]=0x0,this[_0x53d693(0x184)]=alertShield,this['notification']=new notification_1[(_0x53d693(0x1aa))](this['db']),this[_0x53d693(0x192)]=new telegram_1['Telegram'](this);}[_0x19287a(0x2f0)](){var _0x3d78c1,_0x5d5d97;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x30cf95=_0x98aa;logger_1[_0x30cf95(0x212)]['info']('Send\x20sleeping\x20heros...'),this[_0x30cf95(0x285)]=![],yield(0x0,lib_1[_0x30cf95(0x1c5)])(0x1388);for(const _0x30bb10 of this[_0x30cf95(0x2c4)]){yield this[_0x30cf95(0x216)][_0x30cf95(0x25b)](_0x30bb10);}(_0x5d5d97=(_0x3d78c1=this[_0x30cf95(0x192)])===null||_0x3d78c1===void 0x0?void 0x0:_0x3d78c1[_0x30cf95(0x263)])===null||_0x5d5d97===void 0x0?void 0x0:_0x5d5d97[_0x30cf95(0x2f0)]();});}[_0x19287a(0x1d9)](){var _0x55ce34;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x515832=_0x98aa,_0x2a603c=yield this['getReward'](),_0x3ebf65={'date':new Date()[_0x515832(0x1a5)](),'bcoin':((_0x55ce34=_0x2a603c[_0x515832(0x1b6)](_0x171afa=>_0x171afa['network']==this[_0x515832(0x28c)][_0x515832(0x252)]&&_0x171afa[_0x515832(0x2ab)]==_0x515832(0x2ee)))===null||_0x55ce34===void 0x0?void 0x0:_0x55ce34[_0x515832(0x1c2)])||0x0};return _0x3ebf65;});}[_0x19287a(0x246)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4e6626=_0x98aa,_0x4c2660=yield this[_0x4e6626(0x1d9)]();return yield report_1[_0x4e6626(0x2da)][_0x4e6626(0x1c8)]({'identify':this[_0x4e6626(0x279)](),'bcoin':_0x4c2660[_0x4e6626(0x24e)],'date':_0x4c2660[_0x4e6626(0x20d)]}),_0x4c2660;});}[_0x19287a(0x1be)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x21c46b=_0x98aa,_0x2666c5=yield report_1['Report'][_0x21c46b(0x195)]({'where':{'identify':this[_0x21c46b(0x279)]()}});if(!_0x2666c5)return null;const _0x175fce=yield this[_0x21c46b(0x1d9)]();return{'current':_0x175fce,'start':_0x2666c5};});}[_0x19287a(0x1d3)](){const _0x291027=_0x19287a;if(this['playing']===_0x291027(0x1c5))return _0x291027(0x19c);if(this[_0x291027(0x181)]===null)return _0x291027(0x206);return this['playing'];}['getStatsAccount'](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5ef92e=_0x98aa,_0x5429d3=_0x1e40df=>{const _0x1fefca=_0x98aa;var _0x3660b2;const _0x11e2bc=this[_0x1fefca(0x2fb)][_0x1fefca(0x1dd)](_0x1e40df['id'][_0x1fefca(0x226)]()),_0x3c9cd8=((_0x3660b2=_0x1e40df['shields'])===null||_0x3660b2===void 0x0?void 0x0:_0x3660b2[_0x1fefca(0x1cd)])?_0x1e40df[_0x1fefca(0x24b)][0x0][_0x1fefca(0x1de)]+'/'+_0x1e40df[_0x1fefca(0x24b)][0x0][_0x1fefca(0x241)]:_0x1fefca(0x20a);return _0x11e2bc?_0x1fefca(0x27a)+_0x1e40df[_0x1fefca(0x1bf)]+'\x20['+_0x1e40df['id']+_0x1fefca(0x2d1)+_0x1e40df[_0x1fefca(0x1c0)]+'/'+_0x1e40df[_0x1fefca(0x1e9)]+_0x1fefca(0x23d)+_0x3c9cd8+_0x1fefca(0x24f):_0x1e40df[_0x1fefca(0x1bf)]+'\x20['+_0x1e40df['id']+_0x1fefca(0x2d1)+_0x1e40df['energy']+'/'+_0x1e40df[_0x1fefca(0x1e9)]+_0x1fefca(0x23d)+_0x3c9cd8;},_0x432e6c=this[_0x5ef92e(0x2c4)][_0x5ef92e(0x22c)](_0x5429d3)[_0x5ef92e(0x1f8)]('\x0a'),_0x1696b2=this['sleepingSelection']['map'](_0x5429d3)[_0x5ef92e(0x1f8)]('\x0a'),_0x2cc84f=this['homeSelection'][_0x5ef92e(0x22c)](_0x5429d3)[_0x5ef92e(0x1f8)]('\x0a');let _0xc1d81b='\x0a';if(this[_0x5ef92e(0x181)]==='Adventure'){const _0x174d98=this[_0x5ef92e(0x27d)][_0x5ef92e(0x17f)](_0x4cf01c=>_0x4cf01c['hp']>0x0)[_0x5ef92e(0x1cd)],_0x2f6303=this[_0x5ef92e(0x27d)][_0x5ef92e(0x1cd)];_0xc1d81b=_0x5ef92e(0x27f)+_0x174d98+'/'+_0x2f6303+'\x0a\x0a';}const _0x494e02=this[_0x5ef92e(0x2fb)][_0x5ef92e(0x1f8)](',\x20'),_0x55c946=_0x5ef92e(0x298)+this[_0x5ef92e(0x279)]()+'\x0a\x0a'+('Playing\x20mode:\x20'+this['getStatusPlaying']()+'\x0a\x0a')+_0xc1d81b+(_0x5ef92e(0x210)+this[_0x5ef92e(0x216)]['loginParams']['rede']+'\x0a')+_0x5ef92e(0x238)+(this[_0x5ef92e(0x22c)][_0x5ef92e(0x226)]()+'\x0a')+(_0x5ef92e(0x22b)+this[_0x5ef92e(0x2fb)]['length']+'):\x20'+_0x494e02+'\x0a')+(_0x5ef92e(0x293)+this[_0x5ef92e(0x22c)]['formatMsgBlock']()[_0x5ef92e(0x1f8)]('\x0a')+'\x0a\x0a')+'INFO:\x20LIFE\x20HERO\x20|\x20SHIELD\x20HERO\x0a'+(_0x5ef92e(0x186)+this[_0x5ef92e(0x2c4)][_0x5ef92e(0x1cd)]+_0x5ef92e(0x2e5)+_0x432e6c+'\x0a\x0a')+(_0x5ef92e(0x21d)+this['sleepingSelection'][_0x5ef92e(0x1cd)]+_0x5ef92e(0x2e5)+_0x1696b2+'\x0a\x0a')+(_0x5ef92e(0x199)+this[_0x5ef92e(0x180)]['length']+_0x5ef92e(0x2e5)+_0x2cc84f);return _0x55c946;});}[_0x19287a(0x2f1)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x242739=_0x98aa;if(this[_0x242739(0x216)][_0x242739(0x2f5)]){const _0x534a16=yield this[_0x242739(0x216)]['getReward'](),_0x6dfe79=_0x242739(0x298)+this[_0x242739(0x279)]()+'\x0a\x0a'+_0x242739(0x19a)+_0x534a16[_0x242739(0x17f)](_0xe0f522=>_0xe0f522[_0x242739(0x1a4)]==this[_0x242739(0x28c)][_0x242739(0x252)]||_0xe0f522[_0x242739(0x1a4)]=='TR')[_0x242739(0x2ea)]((_0x6cbb99,_0x420aba)=>_0x6cbb99[_0x242739(0x1a4)]>_0x420aba[_0x242739(0x1a4)]?-0x1:0x1)[_0x242739(0x22c)](_0x3bb0ba=>_0x3bb0ba[_0x242739(0x1a4)]+'-'+_0x3bb0ba['type']+':\x20'+((0x0,parsers_1[_0x242739(0x2bb)])(_0x3bb0ba[_0x242739(0x1c2)])?_0x3bb0ba['value'][_0x242739(0x1eb)](0x2):_0x3bb0ba[_0x242739(0x1c2)]))['join']('\x0a');return _0x6dfe79;}else throw new Error(_0x242739(0x1e6));});}get[_0x19287a(0x2c4)](){const _0x248a66=_0x19287a;return this[_0x248a66(0x2bd)][_0x248a66(0x17f)](_0x339c94=>_0x339c94[_0x248a66(0x25a)]===_0x248a66(0x1a6)&&_0x339c94[_0x248a66(0x1c0)]>0x0);}get['notWorkingSelection'](){const _0x169338=_0x19287a;return this[_0x169338(0x2a6)][_0x169338(0x2a8)];}get['sleepingSelection'](){const _0x358710=_0x19287a;return this[_0x358710(0x2a6)][_0x358710(0x253)];}get['homeSelection'](){const _0x2d2cdd=_0x19287a;return this[_0x2d2cdd(0x2a6)][_0x2d2cdd(0x1ea)];}get[_0x19287a(0x1ea)](){const _0x42fc33=_0x19287a;return this[_0x42fc33(0x1d0)]['filter'](_0x277d51=>_0x277d51[_0x42fc33(0x255)])[0x0];}get['homeSlots'](){const _0x33a95f=_0x19287a;var _0x4b2efa;return((_0x4b2efa=this[_0x33a95f(0x1ea)])===null||_0x4b2efa===void 0x0?void 0x0:_0x4b2efa[_0x33a95f(0x1f2)])||0x0;}['nextId'](){const _0xdc76e8=_0x19287a;return this[_0xdc76e8(0x1ca)]++;}['nextHero'](){const _0x193560=_0x19287a;return this[_0x193560(0x2c4)][this[_0x193560(0x245)]()%this[_0x193560(0x2c4)][_0x193560(0x1cd)]];}[_0x19287a(0x2c8)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3e9ad4=_0x98aa;if(this[_0x3e9ad4(0x216)]['isLoggedIn'])return;logger_1[_0x3e9ad4(0x212)]['info'](_0x3e9ad4(0x250)),yield this[_0x3e9ad4(0x216)][_0x3e9ad4(0x1d7)](),this[_0x3e9ad4(0x2e9)](),yield this[_0x3e9ad4(0x216)][_0x3e9ad4(0x20c)](),logger_1[_0x3e9ad4(0x212)][_0x3e9ad4(0x2eb)]('Logged\x20in\x20successfully'),yield this[_0x3e9ad4(0x2ac)]();});}['saveRewards'](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x19b469=_0x98aa;if(!this[_0x19b469(0x28c)][_0x19b469(0x1e8)])return;logger_1[_0x19b469(0x212)][_0x19b469(0x2eb)](_0x19b469(0x207));let _0x5dd5b5=_0x19b469(0x26e);if(_0x19b469(0x19d)in this[_0x19b469(0x216)][_0x19b469(0x188)])_0x5dd5b5=this[_0x19b469(0x216)][_0x19b469(0x188)][_0x19b469(0x19d)];else'wallet'in this['client'][_0x19b469(0x188)]&&(_0x5dd5b5=this[_0x19b469(0x216)][_0x19b469(0x188)][_0x19b469(0x2df)]);const _0x28af5f=_0x19b469(0x1e7)+_0x5dd5b5+_0x19b469(0x268),_0x4e2f4d=yield this['client'][_0x19b469(0x234)](),_0x4729c8=yield(0x0,lib_1[_0x19b469(0x1a7)])(_0x28af5f),_0x983a8e=[],_0x551d67={};_0x4e2f4d['map'](_0x28081f=>{const _0x46140f=_0x19b469,_0x219f71=_0x28081f[_0x46140f(0x2ab)];_0x551d67[_0x219f71]=_0x28081f[_0x46140f(0x1c2)][_0x46140f(0x226)](),_0x983a8e[_0x46140f(0x1c9)]({'id':_0x219f71,'title':_0x219f71});}),_0x4729c8[_0x19b469(0x1c9)](_0x551d67),yield(0x0,lib_1['writeCsv'])(_0x28af5f,_0x4729c8,_0x983a8e);});}[_0x19287a(0x299)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x588f13=yield(0x0,lib_1['getGasPolygon'])();return{'claim':0x1a26b*_0x588f13*1e-9,'resetShield':0xf21f*_0x588f13*1e-9,'mint1':0x5bfe2*_0x588f13*1e-9+0x35788*_0x588f13*1e-9,'mint5':0x8d244*_0x588f13*1e-9+0x2c6ec*_0x588f13*1e-9,'mint10':0x10f46e*_0x588f13*1e-9+0x2c6ec*_0x588f13*1e-9,'mint15':0x182e83*_0x588f13*1e-9+0x2c6ec*_0x588f13*1e-9};});}[_0x19287a(0x20f)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x341146=_0x98aa,[_0x51bc19,_0x53bd28,_0xc7de28]=yield Promise[_0x341146(0x1e2)]([this[_0x341146(0x216)]['web3Balance'](constants_1[_0x341146(0x1ab)]),this['client'][_0x341146(0x1a3)](constants_1[_0x341146(0x2f3)]),this[_0x341146(0x216)]['web3Balance'](constants_1[_0x341146(0x2f2)],_0x341146(0x2c9))]);return{'bomb':_0x51bc19,'matic':_0x53bd28,'usdt':_0xc7de28};});}[_0x19287a(0x2c7)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x48e85d=_0x98aa,{ignoreShieldHeroHouse:_0x4b46a5,modeAmazon:_0x12ba87}=this[_0x48e85d(0x28c)],_0x14ea81=this[_0x48e85d(0x2a6)][_0x48e85d(0x2a8)][_0x48e85d(0x17f)](_0x524804=>!_0x12ba87||_0x4b46a5||_0x12ba87&&_0x524804[_0x48e85d(0x24b)]&&_0x524804['shields'][_0x48e85d(0x1cd)]&&this[_0x48e85d(0x2aa)](_0x524804))[_0x48e85d(0x2ea)]((_0x56219f,_0x3e8507)=>+this['houseHeroes'][_0x48e85d(0x1dd)](_0x3e8507['id'][_0x48e85d(0x226)]())-+this[_0x48e85d(0x2fb)][_0x48e85d(0x1dd)](_0x56219f['id'][_0x48e85d(0x226)]())||_0x3e8507[_0x48e85d(0x22f)]-_0x56219f[_0x48e85d(0x22f)])[_0x48e85d(0x2d2)](0x0,this['homeSlots']);logger_1[_0x48e85d(0x212)][_0x48e85d(0x2eb)](_0x48e85d(0x275)+this[_0x48e85d(0x223)]+_0x48e85d(0x2cb));for(const _0x4b212b of _0x14ea81){if(_0x4b212b[_0x48e85d(0x25a)]===_0x48e85d(0x2e3))continue;const _0x1edc40=this[_0x48e85d(0x2a6)][_0x48e85d(0x197)](_0x48e85d(0x2e3));if(this[_0x48e85d(0x2fb)][_0x48e85d(0x1dd)](_0x4b212b['id'][_0x48e85d(0x226)]())||_0x1edc40[_0x48e85d(0x1cd)]<this[_0x48e85d(0x223)]){if(_0x1edc40['length']<this[_0x48e85d(0x223)])logger_1['logger']['info'](_0x48e85d(0x228)+_0x4b212b['id']+_0x48e85d(0x2a0)),yield this[_0x48e85d(0x216)][_0x48e85d(0x2db)](_0x4b212b);else{const _0x31089d=_0x1edc40[_0x48e85d(0x1b6)](_0x3dd277=>!this['houseHeroes'][_0x48e85d(0x1dd)](_0x3dd277['id']['toString']()));_0x31089d&&(logger_1[_0x48e85d(0x212)][_0x48e85d(0x2eb)](_0x48e85d(0x208)+_0x31089d['id']+_0x48e85d(0x25d)),yield this[_0x48e85d(0x216)][_0x48e85d(0x25b)](_0x31089d),logger_1['logger'][_0x48e85d(0x2eb)](_0x48e85d(0x228)+_0x4b212b['id']+_0x48e85d(0x2a0)),yield this[_0x48e85d(0x216)][_0x48e85d(0x2db)](_0x4b212b));}}}});}[_0x19287a(0x2aa)](_0x443e29){const _0x1a91eb=_0x19287a;var _0x36be18;return((_0x36be18=_0x443e29[_0x1a91eb(0x24b)])===null||_0x36be18===void 0x0?void 0x0:_0x36be18['map'](_0x43730d=>_0x43730d[_0x1a91eb(0x1de)])[_0x1a91eb(0x272)]((_0x531641,_0xa0a862)=>_0x531641+_0xa0a862,0x0))||0x0;}[_0x19287a(0x1bb)](_0x52da76){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x40a4ce=_0x98aa;!(yield this[_0x40a4ce(0x214)][_0x40a4ce(0x1ac)](_0x52da76['id']))&&(this[_0x40a4ce(0x192)][_0x40a4ce(0x2b6)](_0x40a4ce(0x1ad)+_0x52da76['id']+'\x20needs\x20shield\x20repair'),this[_0x40a4ce(0x214)][_0x40a4ce(0x1d6)](_0x52da76['id'],this[_0x40a4ce(0x2aa)](_0x52da76))),logger_1[_0x40a4ce(0x212)][_0x40a4ce(0x2eb)]('Hero\x20'+_0x52da76['id']+_0x40a4ce(0x27e));});}[_0x19287a(0x251)](_0x4e7ab5){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2482e2=_0x98aa;!(yield this[_0x2482e2(0x214)][_0x2482e2(0x205)]())&&(this[_0x2482e2(0x192)][_0x2482e2(0x2b6)](_0x2482e2(0x2d8)),this[_0x2482e2(0x214)][_0x2482e2(0x1ee)](_0x4e7ab5));});}[_0x19287a(0x300)](_0x14ed18){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x34515e=_0x98aa;!(yield this[_0x34515e(0x214)][_0x34515e(0x200)](_0x14ed18['id']))&&(this[_0x34515e(0x192)]['sendMessageChat'](_0x34515e(0x1ad)+_0x14ed18['id']+'\x20has\x200\x20shield'),this[_0x34515e(0x214)]['setHeroZeroShield'](_0x14ed18['id'],0x0));});}[_0x19287a(0x2c1)](_0x5f23f1){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x49eb89=_0x98aa;logger_1[_0x49eb89(0x212)][_0x49eb89(0x2eb)]('Sending\x20hero\x20'+_0x5f23f1['id']+_0x49eb89(0x194)),yield this['client'][_0x49eb89(0x1f0)](_0x5f23f1),this['selection']['push'](_0x5f23f1);});}[_0x19287a(0x2e4)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x494114=_0x98aa;logger_1['logger']['info'](_0x494114(0x24d)),yield this[_0x494114(0x216)][_0x494114(0x1ae)]();const {ignoreNumHeroWork:_0x59066e,numHeroWork:_0x5de304,workHeroWithShield:_0x153869}=this[_0x494114(0x28c)];this['selection']=this[_0x494114(0x2a6)]['byState']('Work');const _0x5c6702=this[_0x494114(0x2a6)][_0x494114(0x2a8)][_0x494114(0x2ea)]((_0x474737,_0x17e60b)=>{const _0x47e0f0=_0x494114,_0x4f2b4b=_0x474737[_0x47e0f0(0x1c0)]/_0x474737[_0x47e0f0(0x1e9)]*0x64,_0x48f88d=_0x17e60b[_0x47e0f0(0x1c0)]/_0x17e60b[_0x47e0f0(0x1e9)]*0x64;return _0x48f88d-_0x4f2b4b||_0x17e60b[_0x47e0f0(0x22f)]-_0x474737[_0x47e0f0(0x22f)];});for(const _0x125c16 of _0x5c6702){yield(0x0,lib_1[_0x494114(0x1c5)])(0x1f4);const _0x547882=_0x125c16[_0x494114(0x1c0)]/_0x125c16[_0x494114(0x1e9)]*0x64;if(!_0x125c16[_0x494114(0x24b)]||_0x125c16['shields'][_0x494114(0x1cd)]===0x0||this['getSumShield'](_0x125c16)<=0x0)continue;if(_0x153869>0x0&&this[_0x494114(0x2aa)](_0x125c16)<=_0x153869&&_0x125c16[_0x494114(0x1c0)]>=0x32){this[_0x494114(0x2c1)](_0x125c16);continue;}if(_0x547882<this[_0x494114(0x1da)])continue;(this['workingSelection'][_0x494114(0x1cd)]<=_0x5de304-0x1||_0x59066e&&_0x547882>=0x64)&&this[_0x494114(0x2c1)](_0x125c16);}logger_1[_0x494114(0x212)][_0x494114(0x2eb)](_0x494114(0x2ec)+this[_0x494114(0x2bd)][_0x494114(0x1cd)]+_0x494114(0x2d6)),yield this[_0x494114(0x2c7)]();});}[_0x19287a(0x234)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x596980=_0x98aa,_0xfddd50=yield this['client'][_0x596980(0x234)]();return yield rewards_1[_0x596980(0x230)][_0x596980(0x28f)]({'where':{'identify':this[_0x596980(0x279)]()}}),_0xfddd50[_0x596980(0x22c)](_0x138a53=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x4d1ef0=_0x596980;return yield rewards_1[_0x4d1ef0(0x230)][_0x4d1ef0(0x1c8)]({'identify':this[_0x4d1ef0(0x279)](),'date':new Date()[_0x4d1ef0(0x1a5)](),'remainTime':_0x138a53[_0x4d1ef0(0x26f)],'type':_0x138a53[_0x4d1ef0(0x2ab)],'value':_0x138a53[_0x4d1ef0(0x1c2)],'claimPending':_0x138a53[_0x4d1ef0(0x18e)],'network':_0x138a53[_0x4d1ef0(0x1a4)]});})),_0xfddd50;});}[_0x19287a(0x17c)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5490d5=_0x98aa;logger_1[_0x5490d5(0x212)][_0x5490d5(0x2eb)](_0x5490d5(0x1f7)),this[_0x5490d5(0x22c)][_0x5490d5(0x296)]<=0x0&&(this[_0x5490d5(0x29c)](),logger_1[_0x5490d5(0x212)][_0x5490d5(0x2eb)](JSON['stringify'](yield this[_0x5490d5(0x234)]()))),yield this[_0x5490d5(0x216)][_0x5490d5(0x2c3)](),logger_1[_0x5490d5(0x212)][_0x5490d5(0x2eb)]('Current\x20map\x20state:\x20'+this[_0x5490d5(0x22c)][_0x5490d5(0x226)]());});}[_0x19287a(0x1d4)](_0x5293f5){const _0x14dd69=_0x19287a,_0x17854f=this['locationByHeroWorking'][_0x14dd69(0x202)](_0x5293f5['id']),_0x97c984=this[_0x14dd69(0x22c)][_0x14dd69(0x2d9)](_0x5293f5)[_0x14dd69(0x1b6)](({tile:_0x16d0b3})=>_0x16d0b3['i']==(_0x17854f===null||_0x17854f===void 0x0?void 0x0:_0x17854f['tile']['i'])&&_0x16d0b3['j']==(_0x17854f===null||_0x17854f===void 0x0?void 0x0:_0x17854f[_0x14dd69(0x1f3)]['j']));if(_0x17854f&&_0x97c984&&_0x97c984[_0x14dd69(0x1d2)]>0x0)return _0x17854f;const _0x5c00a2=this[_0x14dd69(0x22c)][_0x14dd69(0x2d9)](_0x5293f5)[_0x14dd69(0x17f)](({damage:_0x53d708})=>_0x53d708>0x0);let _0x1a5f28;if(_0x5c00a2[_0x14dd69(0x1cd)]<=HISTORY_SIZE)_0x1a5f28=_0x5c00a2[0x0];else{const _0x381eac=_0x5c00a2[_0x14dd69(0x17f)](({tile:_0x30bd97})=>!this[_0x14dd69(0x1f5)][_0x14dd69(0x1b6)](_0x43c25a=>_0x43c25a['i']===_0x30bd97['i']&&_0x43c25a['j']===_0x30bd97['j']));_0x1a5f28=_0x381eac[0x0];}return!_0x1a5f28&&(_0x1a5f28=_0x5c00a2[0x0]),this[_0x14dd69(0x22e)]['set'](_0x5293f5['id'],_0x1a5f28),_0x1a5f28;}[_0x19287a(0x23a)](_0x3e51ad,_0x5897dc){const _0x271c0c=_0x19287a;var _0x51703f;const _0xb80e79=this[_0x271c0c(0x278)][_0x271c0c(0x202)](_0x3e51ad['id']);if(!_0xb80e79)return!![];const _0x1fa235=Math[_0x271c0c(0x1a8)](_0x5897dc['i']-_0xb80e79[_0x271c0c(0x1f3)]['i'])+Math[_0x271c0c(0x1a8)](_0x5897dc['j']-_0xb80e79['tile']['j']),_0x5714b1=Date['now']()-_0xb80e79['timestamp'],_0x4df919=((_0x51703f=this[_0x271c0c(0x25c)][_0x3e51ad['id']])===null||_0x51703f===void 0x0?void 0x0:_0x51703f['ids']['length'])||0x0;return _0x5714b1>=(0x0,lib_1[_0x271c0c(0x2bc)])(_0x1fa235,_0x3e51ad)&&_0x4df919<_0x3e51ad['capacity'];}['removeBombHero'](_0x44bdcb,_0x1b8eeb){const _0x1bd8e4=_0x19287a;!(_0x44bdcb['id']in this[_0x1bd8e4(0x25c)])&&(this[_0x1bd8e4(0x25c)][_0x44bdcb['id']]={'ids':[],'lastId':0x0});const _0x459069=this[_0x1bd8e4(0x25c)][_0x44bdcb['id']];this[_0x1bd8e4(0x25c)][_0x44bdcb['id']][_0x1bd8e4(0x2b2)]=_0x459069['ids'][_0x1bd8e4(0x17f)](_0xcfc6ac=>_0xcfc6ac!==_0x1b8eeb);}[_0x19287a(0x2b9)](_0x1e20a4){const _0x20ca65=_0x19287a;!(_0x1e20a4['id']in this[_0x20ca65(0x25c)])&&(this[_0x20ca65(0x25c)][_0x1e20a4['id']]={'ids':[],'lastId':0x0});const _0x4b3779=this[_0x20ca65(0x25c)][_0x1e20a4['id']];return _0x4b3779['lastId']++,_0x4b3779[_0x20ca65(0x23b)]>_0x1e20a4[_0x20ca65(0x23f)]&&(_0x4b3779['lastId']=0x1),_0x4b3779[_0x20ca65(0x2b2)][_0x20ca65(0x1c9)](_0x4b3779['lastId']),_0x4b3779;}[_0x19287a(0x19f)](_0x42bec0,_0x497b6d){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x22fe15=_0x98aa,_0x5a8e93=this['addBombHero'](_0x42bec0);this['locationByHeroWorking']['delete'](_0x42bec0['id']),this[_0x22fe15(0x278)][_0x22fe15(0x2d0)](_0x42bec0['id'],{'timestamp':Date['now'](),'tile':_0x497b6d}),this[_0x22fe15(0x1d4)](_0x42bec0);if(!_0x5a8e93)return![];const _0x5c28be=_0x5a8e93['lastId'];this['history'][_0x22fe15(0x1c9)](_0x497b6d),logger_1[_0x22fe15(0x212)][_0x22fe15(0x2eb)](_0x42bec0[_0x22fe15(0x1bf)]+'\x20'+_0x42bec0['id']+'\x20'+_0x42bec0[_0x22fe15(0x1c0)]+'/'+_0x42bec0['maxEnergy']+'\x20will\x20place\x20'+(_0x22fe15(0x288)+_0x497b6d['i']+',\x20'+_0x497b6d['j']+')'));const _0x5b8f0b=yield this['client'][_0x22fe15(0x23e)]({'heroId':_0x42bec0['id'],'bombId':_0x5c28be,'hero_type':_0x42bec0[_0x22fe15(0x284)],'blocks':[],'i':_0x497b6d['i'],'j':_0x497b6d['j']});this[_0x22fe15(0x2b0)](_0x42bec0,_0x5c28be);if(!_0x5b8f0b)return![];const {energy:_0x3b76eb}=_0x5b8f0b;while(this['history'][_0x22fe15(0x1cd)]>HISTORY_SIZE)this[_0x22fe15(0x1f5)][_0x22fe15(0x1a2)]();_0x3b76eb<=0x0&&(logger_1[_0x22fe15(0x212)][_0x22fe15(0x2eb)](_0x22fe15(0x228)+_0x42bec0['id']+_0x22fe15(0x28a)),yield this[_0x22fe15(0x216)][_0x22fe15(0x25b)](_0x42bec0),yield this[_0x22fe15(0x2e4)](),yield this[_0x22fe15(0x2c7)]());});}['placeBombsHero'](_0x4b9f6c){return __awaiter(this,void 0x0,void 0x0,function*(){const _0xd1e7b4=_0x98aa,_0x5cb64b=this[_0xd1e7b4(0x1d4)](_0x4b9f6c);_0x5cb64b&&this[_0xd1e7b4(0x23a)](_0x4b9f6c,_0x5cb64b[_0xd1e7b4(0x1f3)])&&(yield this[_0xd1e7b4(0x19f)](_0x4b9f6c,_0x5cb64b[_0xd1e7b4(0x1f3)]));});}['placeBombs'](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4a2165=_0x98aa,_0x23fff7={},_0x41d1b5=[];while(this['map']['totalLife']>0x0&&this[_0x4a2165(0x2c4)][_0x4a2165(0x1cd)]>0x0&&this[_0x4a2165(0x285)]&&this[_0x4a2165(0x1b1)]){this[_0x4a2165(0x1cc)]=!![];for(const _0x1330fd of this[_0x4a2165(0x2c4)]){yield(0x0,lib_1[_0x4a2165(0x1c5)])(0x46),_0x23fff7[_0x1330fd['id']]=_0x1330fd;const _0x1945fd=this[_0x4a2165(0x2f8)](_0x1330fd)[_0x4a2165(0x262)](_0x12a943=>{throw _0x12a943;});_0x41d1b5[_0x4a2165(0x1c9)](_0x1945fd);}}yield Promise['all'](_0x41d1b5),this[_0x4a2165(0x1cc)]=![];});}[_0x19287a(0x1e5)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0xff6a35=_0x98aa,[_0x21e1d0,_0xbd0b78]=yield Promise[_0xff6a35(0x1e2)]([this[_0xff6a35(0x216)]['syncBomberman'](),this[_0xff6a35(0x216)]['getStoryDetails']()]),_0x64b997=_0xbd0b78[_0xff6a35(0x220)]['map'](_0x3dce06=>_0x3dce06['id']);return{'allHeroes':_0x21e1d0,'usedHeroes':_0x64b997};});}[_0x19287a(0x259)](_0x399b08){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2908a4=_0x98aa,_0x45234=yield this[_0x2908a4(0x216)][_0x2908a4(0x248)](),_0x347bc3=_0x45234[_0x2908a4(0x220)]['map'](_0x57be08=>_0x57be08['id']),_0x1cb219=_0x399b08[_0x2908a4(0x1b6)](_0x109543=>!_0x347bc3[_0x2908a4(0x1dd)](_0x109543['id'])&&(this['adventureHeroes']['length']==0x0||this[_0x2908a4(0x1f4)]['includes'](_0x109543['id'][_0x2908a4(0x226)]())));if(!_0x1cb219)return null;return(0x0,model_1[_0x2908a4(0x233)])(Object[_0x2908a4(0x2a2)]({'id':_0x1cb219['id'],'energy':_0x1cb219[_0x2908a4(0x1c0)],'active':!![],'heroType':_0x1cb219['heroType'],'state':_0x2908a4(0x289)},(0x0,parsers_1[_0x2908a4(0x2b1)])(_0x1cb219[_0x2908a4(0x222)])));});}[_0x19287a(0x291)](){const _0x50657e=_0x19287a,_0x13df7d=this[_0x50657e(0x26b)];return _0x13df7d[Math[_0x50657e(0x185)](Math['random']()*_0x13df7d['length'])];}[_0x19287a(0x292)](){const _0x2e0a3f=_0x19287a,_0x14b40a=this['adventureEnemies']['filter'](_0x41509f=>_0x41509f['hp']>0x0);return _0x14b40a[Math[_0x2e0a3f(0x185)](Math['random']()*_0x14b40a[_0x2e0a3f(0x1cd)])];}[_0x19287a(0x1a0)](_0x376b3a,_0x20bbbf,_0x451461=0x0){const _0x4519b6=_0x19287a;_0x451461=_0x451461+0x1;const _0x58e934=Math[_0x4519b6(0x225)]((0x0,lib_1[_0x4519b6(0x18f)])(0x0,0x1c)),_0x4ef3cf=Math[_0x4519b6(0x225)]((0x0,lib_1['getRandomArbitrary'])(0x0,0xa)),_0x3f92af=_0x20bbbf[_0x4519b6(0x191)],_0x518bd2=_0x20bbbf[_0x4519b6(0x17d)],_0xe42da4=(_0x180725,_0x5150d5)=>{const _0x27c463=_0x4519b6;return(_0x3f92af<_0x180725-_0x376b3a[_0x27c463(0x2ba)]||_0x3f92af>_0x180725+_0x376b3a['range'])&&(_0x518bd2<_0x5150d5-_0x376b3a[_0x27c463(0x2ba)]||_0x518bd2>_0x5150d5+_0x376b3a[_0x27c463(0x2ba)]);};if(_0xe42da4(_0x58e934,_0x4ef3cf))return{'i':_0x58e934,'j':_0x4ef3cf};if(_0x451461>=0x64){const _0x42390d=[{'i':0x0,'j':0x0},{'i':0x0,'j':0xa},{'i':0x1c,'j':0x0},{'i':0x1c,'j':0xa}];for(const _0x1171ae of _0x42390d){if(_0xe42da4(_0x1171ae['i'],_0x1171ae['j']))return _0x1171ae;}return{'i':_0x58e934,'j':_0x4ef3cf};}return this[_0x4519b6(0x1a0)](_0x376b3a,_0x20bbbf,_0x451461);}[_0x19287a(0x2ca)](_0x45002d,_0x14e7f7,_0x557b9c,_0x48e259){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x153c83=_0x98aa,_0x4b30fd=_0x14e7f7?_0x14e7f7:this[_0x153c83(0x1a0)](_0x45002d,_0x557b9c,0x0);logger_1[_0x153c83(0x212)][_0x153c83(0x2eb)]('['+_0x45002d[_0x153c83(0x1bf)]+_0x153c83(0x198)+_0x45002d['damage']+'\x20'+_0x45002d['id']+_0x153c83(0x240)+_0x4b30fd['i']+',\x20'+_0x4b30fd['j']+')');const _0x340490=this[_0x153c83(0x216)]['startStoryExplode']({'heroId':_0x45002d['id'],'hero_type':_0x45002d['heroType'],'i':_0x4b30fd['i'],'j':_0x4b30fd['j'],'blocks':[],'bombId':0x0,'isHero':!![]});if(_0x48e259){const _0x139472=this['adventureEnemies'][_0x153c83(0x17f)](_0x587523=>_0x587523['hp']>0x0);logger_1['logger'][_0x153c83(0x2eb)](_0x45002d['id']+'\x20will\x20place\x20bomb\x20in\x20enemy\x20'+_0x48e259['id']+'\x20'+_0x48e259['hp']+'/'+_0x48e259['maxHp']+_0x153c83(0x1b0)+_0x139472['length']);const _0x1c16dd=this[_0x153c83(0x216)][_0x153c83(0x2fa)]({'enemyId':_0x48e259['id'],'heroId':_0x45002d['id']});return yield Promise[_0x153c83(0x1e2)]([_0x340490,_0x1c16dd]);}return yield _0x340490;});}[_0x19287a(0x2b3)](_0x553c50,_0x3a26ec){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x36b602=_0x98aa;let _0x4ce5ec;while((_0x4ce5ec=this[_0x36b602(0x292)]())&&this['shouldRun']){const _0x3582dd=this[_0x36b602(0x291)]();yield this[_0x36b602(0x2ca)](_0x553c50,_0x3582dd,_0x3a26ec,_0x4ce5ec),yield(0x0,lib_1['sleep'])((0x0,lib_1['getRandomArbitrary'])(0x4,0x9)*0x3e8);}return!![];});}[_0x19287a(0x28d)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x69214e=_0x98aa;if(!ADVENTURE_ENABLED)return null;const _0x29159e=yield this['client'][_0x69214e(0x1ae)]();if(_0x29159e[_0x69214e(0x1cd)]<0xf)return null;const _0x5a05ec=yield this[_0x69214e(0x216)]['getReward'](),_0xf49a86=_0x5a05ec['filter'](_0x50cc4f=>_0x50cc4f[_0x69214e(0x2ab)]===_0x69214e(0x215))[0x0];logger_1[_0x69214e(0x212)][_0x69214e(0x2eb)](_0x69214e(0x302));if(!_0xf49a86||_0xf49a86[_0x69214e(0x1c2)]===0x0){logger_1[_0x69214e(0x212)][_0x69214e(0x2eb)](_0x69214e(0x1e4));return;}logger_1[_0x69214e(0x212)][_0x69214e(0x2eb)](_0xf49a86['value']+_0x69214e(0x265));const _0x43206b=yield this['client'][_0x69214e(0x248)](),_0x48dc6d=yield this[_0x69214e(0x259)](_0x29159e);if(_0x48dc6d){const _0x877ff6=Math[_0x69214e(0x274)](_0x43206b[_0x69214e(0x24a)]+0x1,0x2d);logger_1[_0x69214e(0x212)][_0x69214e(0x2eb)](_0x69214e(0x2e7)+_0x877ff6+_0x69214e(0x295)+_0x48dc6d['id']);const _0x48316d=yield this[_0x69214e(0x216)][_0x69214e(0x1b9)](_0x48dc6d['id'],_0x877ff6);this[_0x69214e(0x26b)]=_0x48316d[_0x69214e(0x229)],this[_0x69214e(0x27d)]=_0x48316d[_0x69214e(0x258)],logger_1[_0x69214e(0x212)][_0x69214e(0x2eb)]('Total\x20enemies:\x20'+this[_0x69214e(0x27d)]['length']),yield this['placeBombsAdventure'](_0x48dc6d,_0x48316d),logger_1['logger'][_0x69214e(0x2eb)]('Place\x20bomb\x20in\x20door\x20x:'+_0x48316d['door_x']+_0x69214e(0x1c7)+_0x48316d['door_y']),yield this[_0x69214e(0x2ca)](_0x48dc6d,{'i':_0x48316d[_0x69214e(0x191)],'j':_0x48316d[_0x69214e(0x17d)]},_0x48316d),logger_1[_0x69214e(0x212)][_0x69214e(0x2eb)]('total\x20enemies\x20after\x20door:\x20'+this[_0x69214e(0x27d)]['filter'](_0x1a96a8=>_0x1a96a8['hp']>0x0)[_0x69214e(0x1cd)]),yield this[_0x69214e(0x2b3)](_0x48dc6d,_0x48316d);if(!this[_0x69214e(0x285)])return![];logger_1[_0x69214e(0x212)][_0x69214e(0x2eb)](_0x69214e(0x221));const _0x4d7975=yield this[_0x69214e(0x216)][_0x69214e(0x256)]();logger_1[_0x69214e(0x212)][_0x69214e(0x2eb)]('Finished\x20Adventure\x20mode\x20'+_0x4d7975[_0x69214e(0x1dc)]+_0x69214e(0x2d5));}else logger_1[_0x69214e(0x212)][_0x69214e(0x2eb)](_0x69214e(0x1cf));});}[_0x19287a(0x28e)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3b2f51=_0x98aa,_0x27debf=yield this[_0x3b2f51(0x216)]['syncHouse']();this[_0x3b2f51(0x1d0)]=_0x27debf[_0x3b2f51(0x22c)](parsers_1[_0x3b2f51(0x1d8)])['map'](model_1[_0x3b2f51(0x1db)]);if(this[_0x3b2f51(0x1d0)][_0x3b2f51(0x1cd)]){const _0x4b8de0=this[_0x3b2f51(0x1ea)],[_0x278b18]=this[_0x3b2f51(0x1d0)][_0x3b2f51(0x2ea)]((_0x55bf04,_0x3b43de)=>_0x3b43de['slots']-_0x55bf04[_0x3b2f51(0x1f2)])[_0x3b2f51(0x2d2)](0x0,0x1);if(!_0x4b8de0||_0x4b8de0[_0x3b2f51(0x1f2)]<_0x278b18[_0x3b2f51(0x1f2)]){logger_1[_0x3b2f51(0x212)]['info']('Activing\x20house\x20('+_0x278b18[_0x3b2f51(0x1f2)]+')\x20slots'),yield this[_0x3b2f51(0x216)]['activeHouse'](_0x278b18['id']);const _0x7aa2b0=yield this['client'][_0x3b2f51(0x24c)]();this['houses']=_0x7aa2b0[_0x3b2f51(0x22c)](parsers_1[_0x3b2f51(0x1d8)])['map'](model_1[_0x3b2f51(0x1db)]);}}});}[_0x19287a(0x1ba)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x29e67c=_0x98aa;logger_1[_0x29e67c(0x212)]['info'](_0x29e67c(0x19b));for(const _0x42eb07 of this['workingSelection']){yield this[_0x29e67c(0x216)][_0x29e67c(0x25b)](_0x42eb07);}});}[_0x19287a(0x279)](){const _0x46a44e=_0x19287a;if(this[_0x46a44e(0x28c)]['identify'])return this[_0x46a44e(0x28c)][_0x46a44e(0x1af)];return _0x46a44e(0x19d)in this[_0x46a44e(0x188)]?this[_0x46a44e(0x188)][_0x46a44e(0x19d)]:this[_0x46a44e(0x188)]['wallet'];}[_0x19287a(0x201)](){const _0x29d11f=_0x19287a;setInterval(()=>this[_0x29d11f(0x216)][_0x29d11f(0x235)](),0x3e8*0xa);}[_0x19287a(0x2d4)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x158b75=_0x98aa;yield map_1[_0x158b75(0x1b4)][_0x158b75(0x1c8)]({'identify':this[_0x158b75(0x279)](),'date':new Date()[_0x158b75(0x1a5)]()});});}[_0x19287a(0x18b)](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise(_0x5af428=>{const _0x2cb19e=setInterval(()=>{const _0x2f66c0=_0x98aa;!this[_0x2f66c0(0x1cc)]&&(_0x5af428(!![]),clearInterval(_0x2cb19e));},0x3e8);});});}[_0x19287a(0x22a)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x53dc85=_0x98aa;if(!this[_0x53dc85(0x285)])return;logger_1[_0x53dc85(0x212)][_0x53dc85(0x2eb)](_0x53dc85(0x2c6));const _0x478aa9=this[_0x53dc85(0x2a6)][_0x53dc85(0x281)]['filter'](_0x5f0a1b=>!_0x5f0a1b['shields']||_0x5f0a1b[_0x53dc85(0x24b)][_0x53dc85(0x1cd)]===0x0||this[_0x53dc85(0x2aa)](_0x5f0a1b)===0x0);let _0x23767d=![];if(!this[_0x53dc85(0x28c)][_0x53dc85(0x26c)])return![];for(const _0x551f65 of _0x478aa9){const _0x24565a=yield lastResetShield_1[_0x53dc85(0x19e)][_0x53dc85(0x195)]({'where':{'identify':this[_0x53dc85(0x279)](),'hero':_0x551f65['id']}});(!_0x24565a||Date['now']()>_0x24565a[_0x53dc85(0x20d)]+0x6+0x3c*0x3c*0x3e8)&&(yield this['resetShield'](_0x551f65),_0x23767d=!![]);}_0x23767d&&this[_0x53dc85(0x2b7)]();});}[_0x19287a(0x280)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0xfc9590=_0x98aa;logger_1[_0xfc9590(0x212)][_0xfc9590(0x2eb)](_0xfc9590(0x26d)),this[_0xfc9590(0x285)]=!![],this[_0xfc9590(0x1b1)]=!![],(0x0,lib_1['connectWebSocketAnalytics'])(this)['catch'](_0x4d12cd=>{const _0x134ce1=_0xfc9590;console[_0x134ce1(0x1ed)](_0x4d12cd);}),yield this[_0xfc9590(0x17e)](),yield this['logIn'](),this[_0xfc9590(0x201)](),yield this[_0xfc9590(0x28e)](),yield this[_0xfc9590(0x17c)](),logger_1[_0xfc9590(0x212)][_0xfc9590(0x2eb)](_0xfc9590(0x2b5)),this[_0xfc9590(0x181)]=this[_0xfc9590(0x28c)]['modeAmazon']?_0xfc9590(0x29a):'Treasure',yield this[_0xfc9590(0x216)][_0xfc9590(0x1b8)](0x0,this[_0xfc9590(0x28c)][_0xfc9590(0x1fa)]);do{this[_0xfc9590(0x181)]='Amazon',yield this['checkVersion'](),this[_0xfc9590(0x22c)]['totalLife']<=0x0&&(yield this[_0xfc9590(0x28e)](),yield this[_0xfc9590(0x17c)](),this[_0xfc9590(0x2d4)]()),yield this['refreshHeroSelection'](),yield this[_0xfc9590(0x249)](),logger_1['logger'][_0xfc9590(0x2eb)](_0xfc9590(0x1ff)),this[_0xfc9590(0x181)]=_0xfc9590(0x1c5),yield this[_0xfc9590(0x22a)](),logger_1['logger'][_0xfc9590(0x2eb)](_0xfc9590(0x1ef)),yield(0x0,lib_1[_0xfc9590(0x1c5)])(0xa*0x3e8);}while(this['shouldRun']);yield this[_0xfc9590(0x1ba)](),yield this[_0xfc9590(0x2c7)](),logger_1['logger']['info'](_0xfc9590(0x2ce)),yield this[_0xfc9590(0x216)]['stopPVE']();});}[_0x19287a(0x1b3)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x504cdc=_0x98aa;if(this[_0x504cdc(0x1ec)])return this[_0x504cdc(0x216)]['checkTransaction'](this[_0x504cdc(0x1ec)]);return!![];});}['syncBomberman'](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0xdedf7a=_0x98aa,_0x4eed2a=yield this[_0xdedf7a(0x216)][_0xdedf7a(0x1ae)]();return _0x4eed2a[_0xdedf7a(0x22c)](parsers_1[_0xdedf7a(0x2c0)])[_0xdedf7a(0x22c)](model_1[_0xdedf7a(0x233)]);});}['setIsFarmTrue'](){const _0x1d02fc=_0x19287a;!this[_0x1d02fc(0x231)]&&!this['isActivateHero']&&!this[_0x1d02fc(0x29e)]&&(this[_0x1d02fc(0x1b1)]=!![]);}[_0x19287a(0x2dd)](_0x503b06){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5e467c=_0x98aa;try{const _0xfacbad=yield this[_0x5e467c(0x1b3)]();if(this[_0x5e467c(0x188)][_0x5e467c(0x2ab)]==_0x5e467c(0x1c6)||this[_0x5e467c(0x188)][_0x5e467c(0x252)]==_0x5e467c(0x2be)||!this['shouldRun']||!_0xfacbad)return![];this[_0x5e467c(0x1b1)]=![],this[_0x5e467c(0x29e)]=!![];this['isHeroFarming']&&(logger_1[_0x5e467c(0x212)][_0x5e467c(0x2eb)](_0x5e467c(0x1e0)),yield this['telegram'][_0x5e467c(0x2b6)](_0x5e467c(0x1e0)));yield this['awaitHeroFarm'](),yield this[_0x5e467c(0x192)]['sendMessageChat'](_0x5e467c(0x271)+_0x503b06['join'](',\x20')),logger_1[_0x5e467c(0x212)]['info']('Creating\x20material\x20with\x20heroes:\x20'+_0x503b06['join'](',\x20')),_0x503b06[_0x5e467c(0x22c)](_0x4bb3c2=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x1e2e55=_0x5e467c,_0x2f8ef6=yield heroZeroShield_1[_0x1e2e55(0x277)][_0x1e2e55(0x195)]({'where':{'identify':this[_0x1e2e55(0x279)](),'hero':_0x4bb3c2}});_0x2f8ef6&&(yield _0x2f8ef6[_0x1e2e55(0x28f)]());}));const _0x47ef24=yield this[_0x5e467c(0x216)][_0x5e467c(0x217)](_0x503b06);this[_0x5e467c(0x1ec)]=_0x47ef24[_0x5e467c(0x257)],yield(0x0,lib_1['sleep'])(0x3e8),yield(0x0,lib_1[_0x5e467c(0x1c5)])(0x7d0);const _0x1deb19=yield this['client']['web3GetRock']();yield this[_0x5e467c(0x216)][_0x5e467c(0x1ae)](),yield this[_0x5e467c(0x192)]['sendMessageChat'](_0x5e467c(0x21f)+_0x1deb19+_0x5e467c(0x2d3)),logger_1[_0x5e467c(0x212)][_0x5e467c(0x2eb)]('You\x20have\x20'+_0x1deb19+'\x20of\x20material'),this[_0x5e467c(0x29e)]=![],this['setIsFarmTrue']();}catch(_0x214445){this[_0x5e467c(0x29e)]=![],this[_0x5e467c(0x2b7)](),this[_0x5e467c(0x192)][_0x5e467c(0x2b6)](_0x5e467c(0x1b7)+_0x214445['message']);}});}['resetShield'](_0x40405c){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2c4288=_0x98aa;try{const {maxGasRepairShield:_0x143e2a,alertMaterial:_0x562a44}=this[_0x2c4288(0x28c)],_0x376018=yield this[_0x2c4288(0x1b3)]();if(this[_0x2c4288(0x231)]||this[_0x2c4288(0x188)][_0x2c4288(0x2ab)]=='user'||this['loginParams'][_0x2c4288(0x252)]==_0x2c4288(0x2be)||!this[_0x2c4288(0x285)]||!_0x376018)return![];let _0x32cb36=yield this[_0x2c4288(0x216)]['web3GetRock']();const _0x5d7146=yield this[_0x2c4288(0x299)]();_0x562a44>0x0&&_0x32cb36<=_0x562a44&&this[_0x2c4288(0x251)](_0x32cb36);if(_0x40405c[_0x2c4288(0x190)]>_0x32cb36||_0x143e2a>0x0&&_0x5d7146[_0x2c4288(0x290)]>_0x143e2a){logger_1[_0x2c4288(0x212)]['info'](_0x2c4288(0x2ed)+_0x5d7146[_0x2c4288(0x290)]),logger_1[_0x2c4288(0x212)][_0x2c4288(0x2eb)](_0x2c4288(0x1f6)+_0x32cb36+',\x20hero:\x20'+_0x40405c['rockRepairShield']);return;}this['isFarming']=![],this[_0x2c4288(0x231)]=!![];this[_0x2c4288(0x1cc)]&&(logger_1[_0x2c4288(0x212)][_0x2c4288(0x2eb)]('Waiting\x20for\x20the\x20heroes\x20to\x20finish\x20farming'),yield this[_0x2c4288(0x192)][_0x2c4288(0x2b6)](_0x2c4288(0x1e0)));yield this[_0x2c4288(0x18b)](),yield this['telegram']['sendMessageChat'](_0x2c4288(0x260)+_0x40405c['id']+'...');const _0x4716c5=yield this[_0x2c4288(0x216)][_0x2c4288(0x2ae)](_0x40405c);this[_0x2c4288(0x1ec)]=_0x4716c5['transactionHash'],yield(0x0,lib_1[_0x2c4288(0x1c5)])(0x3e8),_0x32cb36=yield this['client'][_0x2c4288(0x29d)](),lastResetShield_1[_0x2c4288(0x19e)]['create']({'identify':this[_0x2c4288(0x279)](),'hero':_0x40405c['id'],'date':Date[_0x2c4288(0x1ce)]()});const _0x11b629=yield this[_0x2c4288(0x1ae)](),_0x796ca5=_0x11b629['find'](_0x4995b6=>_0x4995b6['id']==_0x40405c['id']);_0x796ca5&&this[_0x2c4288(0x2a6)][_0x2c4288(0x266)](_0x796ca5),yield this['telegram'][_0x2c4288(0x2b6)]('Hero\x20'+_0x40405c['id']+_0x2c4288(0x2d7)+_0x32cb36+_0x2c4288(0x2d3)),this['isResettingShield']=![];}catch(_0x43b784){this['isResettingShield']=![],this[_0x2c4288(0x192)][_0x2c4288(0x2b6)]('Error\x20repair\x20shield\x0a\x0a'+_0x43b784[_0x2c4288(0x239)]);}});}['resetState'](){const _0x5e2ba1=_0x19287a;this[_0x5e2ba1(0x1f5)]=[],this[_0x5e2ba1(0x278)]=new Map(),this['heroBombs']={},this[_0x5e2ba1(0x22e)]=new Map(),this[_0x5e2ba1(0x2bd)]=[],this[_0x5e2ba1(0x1ca)]=0x0;}['resetStateAdventure'](){const _0x20656e=_0x19287a;this[_0x20656e(0x26b)]=[],this[_0x20656e(0x27d)]=[];}['reset'](){const _0x4c01f3=_0x19287a;this['client'][_0x4c01f3(0x187)](),this[_0x4c01f3(0x216)]['on']({'event':_0x4c01f3(0x2c3),'handler':this[_0x4c01f3(0x2fe)]['bind'](this)}),this[_0x4c01f3(0x216)]['on']({'event':_0x4c01f3(0x1ae),'handler':this[_0x4c01f3(0x2cf)]['bind'](this)}),this[_0x4c01f3(0x216)]['on']({'event':'goSleep','handler':this[_0x4c01f3(0x2ef)]['bind'](this)}),this[_0x4c01f3(0x216)]['on']({'event':_0x4c01f3(0x2db),'handler':this[_0x4c01f3(0x287)][_0x4c01f3(0x1c1)](this)}),this['client']['on']({'event':_0x4c01f3(0x1f0),'handler':this[_0x4c01f3(0x2c2)][_0x4c01f3(0x1c1)](this)}),this['client']['on']({'event':_0x4c01f3(0x2f7),'handler':this[_0x4c01f3(0x2a1)][_0x4c01f3(0x1c1)](this)}),this[_0x4c01f3(0x216)]['on']({'event':_0x4c01f3(0x23e),'handler':this['handleExplosion'][_0x4c01f3(0x1c1)](this)}),this[_0x4c01f3(0x216)]['on']({'event':_0x4c01f3(0x21e),'handler':this['handleStartStoryExplode'][_0x4c01f3(0x1c1)](this)}),this[_0x4c01f3(0x216)]['on']({'event':_0x4c01f3(0x2fa),'handler':this[_0x4c01f3(0x18a)][_0x4c01f3(0x1c1)](this)}),this[_0x4c01f3(0x216)]['on']({'event':'messageError','handler':this[_0x4c01f3(0x2e8)]['bind'](this)}),this[_0x4c01f3(0x29c)]();}[_0x19287a(0x2fe)](_0x4828fa){const _0x3fbbf2=_0x19287a,_0x2321af=_0x4828fa[_0x3fbbf2(0x22c)](parsers_1['parseGetBlockMapPayload'])[_0x3fbbf2(0x22c)](model_1['buildBlock']);this[_0x3fbbf2(0x22c)]['update']({'blocks':_0x2321af});}[_0x19287a(0x2cf)](_0x599e86){const _0x3699b7=_0x19287a,_0x5e6725=_0x599e86['map'](parsers_1['parseGetActiveBomberPayload'])['map'](model_1[_0x3699b7(0x233)]);logger_1[_0x3699b7(0x212)][_0x3699b7(0x2eb)](_0x3699b7(0x25f)+_0x5e6725[_0x3699b7(0x1cd)]+'\x20heroes'),_0x5e6725[_0x3699b7(0x22c)](_0x95fb3c=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x33902c=_0x3699b7;return yield this[_0x33902c(0x214)][_0x33902c(0x1fe)](_0x95fb3c['id'],this[_0x33902c(0x2aa)](_0x95fb3c)),_0x95fb3c;})),_0x5e6725['filter'](_0x2a9d30=>_0x2a9d30[_0x3699b7(0x255)])[_0x3699b7(0x22c)](_0x32a44d=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x85021a=_0x3699b7;var _0x2e76b5;if(this['params'][_0x85021a(0x1fa)]&&(!_0x32a44d[_0x85021a(0x24b)]||_0x32a44d['shields'][_0x85021a(0x1cd)]===0x0||this[_0x85021a(0x2aa)](_0x32a44d)<=this['alertShield'])){const _0x1aa6a4=(_0x2e76b5=this[_0x85021a(0x25e)][_0x85021a(0x202)](_0x32a44d['id']))===null||_0x2e76b5===void 0x0?void 0x0:_0x2e76b5['timestamp'];this['alertShield']>0x0&&(!_0x1aa6a4||(_0x1aa6a4&&Math['abs'](new Date(_0x1aa6a4)[_0x85021a(0x1a5)]()-new Date()['getTime']())/0x36ee80)>0x18)&&(yield this[_0x85021a(0x1bb)](_0x32a44d),this[_0x85021a(0x25e)]['set'](_0x32a44d['id'],{'timestamp':new Date()[_0x85021a(0x1a5)]()})),(!_0x32a44d[_0x85021a(0x24b)]||_0x32a44d[_0x85021a(0x24b)][_0x85021a(0x1cd)]===0x0||this[_0x85021a(0x2aa)](_0x32a44d)===0x0)&&(yield this[_0x85021a(0x300)](_0x32a44d));}})),this[_0x3699b7(0x2a6)][_0x3699b7(0x1e1)]({'heroes':_0x5e6725});}[_0x19287a(0x2ef)](_0x3adb21){const _0x5387e5=_0x19287a;this['squad']['updateHeroEnergy'](_0x3adb21),this[_0x5387e5(0x2a6)][_0x5387e5(0x1f1)](_0x3adb21['id'],_0x5387e5(0x289));}[_0x19287a(0x287)](_0x342512){const _0x32ef9f=_0x19287a;this[_0x32ef9f(0x2a6)][_0x32ef9f(0x264)](_0x342512),this[_0x32ef9f(0x2a6)][_0x32ef9f(0x1f1)](_0x342512['id'],_0x32ef9f(0x2e3));}[_0x19287a(0x2c2)](_0x1c8539){const _0xce963f=_0x19287a;this['squad'][_0xce963f(0x264)](_0x1c8539),this['squad'][_0xce963f(0x1f1)](_0x1c8539['id'],_0xce963f(0x1a6));}[_0x19287a(0x182)](){const _0x372409=_0x19287a;this[_0x372409(0x192)][_0x372409(0x2b6)](_0x372409(0x1a9));}[_0x19287a(0x2a1)](_0x24ab21){const _0x5bd3b8=_0x19287a;var _0x34859;if(!_0x24ab21)return;const [_0xb74531,_0x4272de]=(0x0,parsers_1[_0x5bd3b8(0x28b)])(_0x24ab21);this['squad'][_0x5bd3b8(0x264)](_0x4272de);for(const _0x20b9f0 of _0xb74531){const _0x57c155=this['map'][_0x5bd3b8(0x28c)][_0x5bd3b8(0x29f)][_0x5bd3b8(0x1b6)](_0x2a2239=>_0x2a2239['i']==_0x20b9f0['i']&&_0x2a2239['j']==_0x20b9f0['j']);(_0x57c155===null||_0x57c155===void 0x0?void 0x0:_0x57c155[_0x5bd3b8(0x2ab)])===model_1[_0x5bd3b8(0x2fd)][0x2]&&_0x20b9f0['hp']===0x0&&this[_0x5bd3b8(0x182)]();if((_0x34859=_0x20b9f0[_0x5bd3b8(0x1dc)])===null||_0x34859===void 0x0?void 0x0:_0x34859[_0x5bd3b8(0x1cd)]){const _0x3f5ea3=this[_0x5bd3b8(0x2a6)][_0x5bd3b8(0x269)](),_0x22f15f=this[_0x5bd3b8(0x223)];_0x20b9f0[_0x5bd3b8(0x1dc)]['map'](_0x4ee163=>{const _0x14d553=_0x5bd3b8;var _0x1f321a,_0x1a7fc9,_0xf16fc2;(0x0,lib_1[_0x14d553(0x2e6)])(_0x14d553(0x27b),{'reward':_0x4ee163,'heroes':_0x3f5ea3,'houseSlots':_0x22f15f,'minHeroEnergyPercentage':this[_0x14d553(0x28c)][_0x14d553(0x1da)],'numHeroWork':this[_0x14d553(0x28c)][_0x14d553(0x23c)],'telegramUsername':((_0x1f321a=this[_0x14d553(0x192)]['owner'])===null||_0x1f321a===void 0x0?void 0x0:_0x1f321a[_0x14d553(0x19d)])||'','telegramFirstName':((_0x1a7fc9=this[_0x14d553(0x192)][_0x14d553(0x2de)])===null||_0x1a7fc9===void 0x0?void 0x0:_0x1a7fc9[_0x14d553(0x2ff)])||'','telegramLastName':((_0xf16fc2=this[_0x14d553(0x192)][_0x14d553(0x2de)])===null||_0xf16fc2===void 0x0?void 0x0:_0xf16fc2[_0x14d553(0x1df)])||'','wallet':this[_0x14d553(0x188)][_0x14d553(0x2df)]||''});});}}_0xb74531[_0x5bd3b8(0x1cb)](_0x48326e=>this[_0x5bd3b8(0x22c)][_0x5bd3b8(0x26a)](_0x48326e));}[_0x19287a(0x193)](_0x13b95f){const _0x82edc9=_0x19287a;_0x13b95f[_0x82edc9(0x29f)]['length']&&_0x13b95f[_0x82edc9(0x29f)][_0x82edc9(0x1cb)](_0x5e11c9=>{const _0x5e963e=_0x82edc9;this[_0x5e963e(0x26b)]=this[_0x5e963e(0x26b)]['filter'](_0x4c4cc2=>_0x4c4cc2['i']!==_0x5e11c9['i']||_0x4c4cc2['j']!==_0x5e11c9['j']);}),_0x13b95f[_0x82edc9(0x258)]&&_0x13b95f[_0x82edc9(0x258)][_0x82edc9(0x1cd)]&&(logger_1[_0x82edc9(0x212)][_0x82edc9(0x2eb)](_0x82edc9(0x218)+_0x13b95f[_0x82edc9(0x258)][_0x82edc9(0x1cd)]),_0x13b95f[_0x82edc9(0x258)][_0x82edc9(0x1cb)](_0x404a5b=>{const _0x4f7efe=_0x82edc9;this[_0x4f7efe(0x27d)][_0x4f7efe(0x1c9)](_0x404a5b);}));}[_0x19287a(0x18a)](_0x3a3aba){const _0x151823=_0x19287a,_0xae969a=this['adventureEnemies'][_0x151823(0x1b6)](_0x316395=>_0x316395['id']==_0x3a3aba['id']);_0xae969a&&(_0xae969a['hp']=_0x3a3aba['hp']);}[_0x19287a(0x2e8)](_0x3e992b,_0x1f8ef0){const _0x5c5b8a=_0x19287a;![_0x5c5b8a(0x1e3),_0x5c5b8a(0x209),_0x5c5b8a(0x244),_0x5c5b8a(0x21c),_0x5c5b8a(0x2f6)][_0x5c5b8a(0x1dd)](_0x3e992b)&&this[_0x5c5b8a(0x192)][_0x5c5b8a(0x2b6)]('Error:\x20'+_0x3e992b+'\x20'+_0x1f8ef0);}[_0x19287a(0x2fc)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x183364=_0x98aa,_0x35e839=require(_0x183364(0x247));pm2_1[_0x183364(0x1c4)][_0x183364(0x282)](()=>{const _0x660b3=_0x183364;_0x35e839[_0x660b3(0x1fb)][_0x660b3(0x22c)](_0x4a4ab0=>{const _0x504963=_0x660b3;logger_1['logger'][_0x504963(0x2eb)](_0x504963(0x243)+_0x4a4ab0[_0x504963(0x276)]),pm2_1[_0x504963(0x1c4)][_0x504963(0x2c5)](_0x4a4ab0,_0x1ad733=>{console['log'](_0x1ad733);});});});});}[_0x19287a(0x29b)](_0x3ea8fb,_0x596a09,_0x46e443){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x200a4e=_0x98aa,_0x2c8c0e=require(_0x200a4e(0x247)),_0x3441f2=_0x2c8c0e[_0x200a4e(0x1fb)]['find'](_0x7d10b1=>{const _0x47306d=_0x200a4e;var _0x30c1b3;return((_0x30c1b3=_0x7d10b1[_0x47306d(0x219)])===null||_0x30c1b3===void 0x0?void 0x0:_0x30c1b3[_0x47306d(0x2a9)])==_0x3ea8fb;});if(!_0x3441f2)return this[_0x200a4e(0x192)]['sendMessageChat'](_0x200a4e(0x1f9));_0x46e443===null?delete _0x3441f2[_0x200a4e(0x219)][_0x596a09]:_0x3441f2['env'][_0x596a09]=_0x46e443,yield this['pm2SaveFile'](_0x2c8c0e),pm2_1[_0x200a4e(0x1c4)]['connect'](()=>{const _0x1a35c6=_0x200a4e;pm2_1[_0x1a35c6(0x1c4)][_0x1a35c6(0x2c5)](_0x3441f2,_0x619ca9=>console[_0x1a35c6(0x1ed)](_0x619ca9));});});}[_0x19287a(0x1fd)](_0x1b7b5c){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x45d00a=_0x98aa;(0x0,fs_1['writeFileSync'])(path_1['default'][_0x45d00a(0x1f8)](__dirname,'..',_0x45d00a(0x254),_0x45d00a(0x189)),'module.exports\x20=\x20'+JSON['stringify'](_0x1b7b5c,null,0x4)+';');});}['pm2AddAccount'](_0x2d7908){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5ec280=_0x98aa,_0x4f6934=require(_0x5ec280(0x247)),_0x389a8b={'name':_0x2d7908['IDENTIFY'],'instances':'1','exec_mode':'fork','script':'npm\x20run\x20start:bot','env':_0x2d7908};_0x4f6934['apps'][_0x5ec280(0x1c9)](_0x389a8b),yield this[_0x5ec280(0x1fd)](_0x4f6934);});}[_0x19287a(0x286)](_0x58f2fd){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x1c2033=_0x98aa,_0x108f44=require(_0x1c2033(0x247));_0x108f44[_0x1c2033(0x1fb)]=_0x108f44[_0x1c2033(0x1fb)]['filter'](_0x227014=>_0x227014['name']!=_0x58f2fd),yield this[_0x1c2033(0x1fd)](_0x108f44),pm2_1[_0x1c2033(0x1c4)][_0x1c2033(0x282)](()=>{const _0xf3c341=_0x1c2033;pm2_1[_0xf3c341(0x1c4)][_0xf3c341(0x1b2)](_0x58f2fd,_0x16429c=>{const _0x174446=_0xf3c341;console[_0x174446(0x1ed)](_0x16429c);});});});}[_0x19287a(0x17e)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x471f03=_0x98aa;logger_1['logger'][_0x471f03(0x2eb)]('Checking\x20version...'),child_process_1['default'][_0x471f03(0x273)](_0x471f03(0x196)),child_process_1[_0x471f03(0x1c4)]['execSync'](_0x471f03(0x2e0)),child_process_1['default']['execSync']('git\x20config\x20--global\x20pull.rebase\x20false');const _0x121710=child_process_1[_0x471f03(0x1c4)][_0x471f03(0x273)](_0x471f03(0x236))[_0x471f03(0x226)](),_0x17eff9=!_0x121710[_0x471f03(0x1dd)](_0x471f03(0x203));_0x17eff9&&(logger_1[_0x471f03(0x212)][_0x471f03(0x2eb)](_0x471f03(0x204)),child_process_1['default']['execSync'](_0x471f03(0x1d5)),child_process_1[_0x471f03(0x1c4)][_0x471f03(0x273)](_0x471f03(0x18d)),yield this[_0x471f03(0x2fc)]());});}}exports[_0x19287a(0x224)]=TreasureMapBot,exports[_0x19287a(0x21a)]=(0x0,lib_1['t'])(_0x19287a(0x1a1));